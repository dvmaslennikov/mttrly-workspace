# MEMORY.md - Долгосрочная память

## О Диме

- **Статус:** Не программист, работает с технологией но предпочитает инструкции вместо деталей
- **Стиль общения:** Бро-режим, по делу, без воды, юмор приветствуется
- **Требования:** Обязательно объяснять ситуацию + анализ вариантов перед любым действием
- **Twitter:** Есть аккаунт `mttrly@mttrly.com`, auth_token: `3591d6b53db307b8d8605262530ddfa858bcbba0`
- **Важно:** Браузер критичен для работы — используется для автоматизации Twitter

## Инцидент 2026-02-24: Gateway Crash Loop

**Что произошло:**
- Конфиг был повреждён: бот добавлял невалидные ключи (`browser.proxy`, `extraArgs`)
- Но реальная проблема была другая — **"Gateway service check failed"** в логах каждые ~10 сек
- Это был heartbeat агента, пытающийся проверить systemctl, который недоступен в контексте

**Решение:**
- Очистили config от невалидных ключей
- Исправили permissions (chown openclaw:openclaw)
- Перезагрузили gateway

**Вывод:** Ошибки в логах ≠ реальный крах системы

## Twitter Авторизация (2026-02-25)

**Проблема:** Headless браузер не может загрузить Google Sign-In (сетевая изоляция)

**Решение:** Использовали куку auth_token
- Загрузили куку через Playwright `context.addCookies()`
- Браузер перешёл на `/home` → успешная авторизация
- Теперь полный доступ к Twitter (навигация, посты, всё)

**Ключевое:**
- CDP (Chrome DevTools Protocol) позволяет подключиться к существующему браузеру
- `connectOverCDP()` работает без закрытия браузера
- Cookies можно вытащить через DevTools → Application → Cookies

## Технические уроки

1. **Gateway error loop** не всегда критичен — иногда это просто ошибка мониторинга
2. **Twitter защищен** — нет видимых input элементов в login flow
3. **Headless браузер** имеет ограничения (Google SignIn, некоторые фреймы)
4. **Правильный путь:** кука или API токены, не попытки заполнять formы
5. **Управление браузером:** CDP + Playwright — мощная комбинация

## Проект Twitter (@mttrly)

**Цель:** Вести полезно-развлекательный DevOps/инжиниринг-аккаунт без пушинга, накапливая доверие

**Ежедневный процесс:**
1. Утро (09:30) и вечер (18:00) по CET
2. Собрать 20–40 твитов по интентам (из query-fanout.md)
3. Отскорить по релевантности, свежести, reach (scoring-and-routing.md)
4. Выбрать Top-5 твитов
5. Подготовить 2 варианта ответа на каждый (SAFE + PUNCHY)
6. Отправить daily pack на аппрув Диме
7. Публиковать **только с его явным согласованием**
8. Логировать в daily-template.md

**Главные темы (ICP):**
- Incidents now (502, OOM, prod down)
- On-call pain & burnout
- Debug confusion
- Deploy fear
- Security oops
- Monitoring stack discussions

**Стиль:**
- Спокойно-пофигистичный, профессиональный
- Коротко, ёмко, сухая ирония
- Полезно сам по себе, без кликбейта

**Ограничения:**
- 3–5 качественных ответов в день
- Максимум 1 product mention в день
- Максимум 1–2 ссылки в день
- Только проверенные факты

**Файлы:**
- `daily-process.md` — процесс
- `query-fanout.md` — интенты и поиск
- `scoring-and-routing.md` — как выбирать
- `response-policy.md` — правила ответов
- `daily-template.md` — логирование

## Текущий статус

✅ Gateway живой и работает  
✅ Браузер авторизован в Twitter  
✅ Готов к автоматизации Twitter ops  
